<div class="page-header">
  <table>
    <tr>
      <td><%= @service.name %> Users</td>
      <td><%= link_to "New User", new_team_server_service_user_path(@team,@server,@service), class: 'btn btn-primary' if can? :new, User %></td>
    </tr>
  </table>
</div>

<% service = @service if @service %>
<% users = service.users.order('updated_at DESC') %>

<table class="table table-bordered table-hover">
  <thead>
    <tr>
      <th>Updated At</th>
      <th>Username</th>
      <th>Password</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% if users.count == 0 %>
      <tr>
        <td colspan="4">No Users</td>
      </tr>
    <% else %>
      <% users.each do |user| %>
        <tr>
          <td><%= user.updated_at %></td>
          <td><%= user.username %></td>
          <td><%= user.password %></td>
          <td>
            <%= link_to "Show", team_server_service_user_path(@team,@server,service,user), class: "btn btn-small" if can? :show, user%>
            <%= link_to "Edit", edit_team_server_service_user_path(@team,@server,service,user), class: 'btn btn-small' if can? :edit, user %>
            <%= link_to 'Delete', team_server_service_user_path(@team,@server,service,user), class: 'btn btn-small btn-danger', method: :delete, data: { confirm: 'Please Confirm' } if can? :destroy, user %>
          </td>

        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
