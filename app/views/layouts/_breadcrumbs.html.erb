<% breadcrumbs = Array.new %>
<% breadcrumbs << @check if @check %>
<% breadcrumbs << @user if @user %>
<% breadcrumbs << @property if @property %>
<% breadcrumbs << @service if @service %>
<% breadcrumbs << @server if @server %>
<% breadcrumbs << @team if @team %>

<% if breadcrumbs.size != 0 %>
  <ul class="breadcrumb">
    <% while breadcrumbs.size != 0 %>
      <% crumb = breadcrumbs.pop %>
    
      <% if crumb.class == Team %>
        <% team = crumb %>
        <% if team.id %>
          <li>Team: <%= link_to team.alias, team_path(team) %></li>
        <% else %>
          <li>Team: <%= params[:action] %></li>
        <% end %>
      <% end %>
    
      <% if crumb.class == Server %>
        <% server = crumb %>
        <% if server.id %>
          <li>Server: <%= link_to server.name, team_server_path(team,server) %></li>
        <% else %>
          <li>Server: <%= params[:action] %></li>
        <% end %>
      <% end %>
    
      <% if crumb.class == Service %>
        <% service = crumb %>
        <% if service.id %>
          <li>Service: <%= link_to service.name, team_server_service_path(team,server,service) %></li>
        <% else %>
          <li>Service: <%= params[:action] %></li>
        <% end %>
      <% end %>
    
      <% if crumb.class == Check %>
        <% check = crumb %>
        <% if check.id %>
          <li>Check: <%= link_to check.id, team_server_service_check_path(team,server,service,check) %></li>
        <% else %>
          <li>Check: <%= params[:action] %></li>
        <% end %>
      <% end %>
    
      <% if crumb.class == Property %>
        <% property = crumb %>
        <% if property.id %>
          <li>Property: <%= link_to property.property, team_server_service_property_path(team,server,service,property) %></li>
        <% else %>
          <li>Property: <%= params[:action] %></li>
        <% end %>
      <% end %>
      
      <% if crumb.class == User %>
        <% user = crumb %>
        <% if user.id %>
          <li>User: <%= link_to user.username, team_server_service_user_path(team,server,service,user) %></li>
        <% else %>
          <li>User: <%= params[:action] %></li>
        <% end %>
      <% end %>
    
      <% if breadcrumbs.size != 0 %>
        <li><span class="divider">/</span></li>
      <% else %>
        <% unless check || user || property %>
          <li><span class="divider">/</span></li>
          <% if service && service.id %> 
            <li>
            [
              <%= link_to 'Checks', team_server_service_checks_path(team,server,service) %>,
              <%= link_to 'Users', team_server_service_users_path(team,server,service) %>,
              <%= link_to 'Properties', team_server_service_properties_path(team,server,service) %>
            ]
            </li>
          <% elsif server && server.id %>
            <li>
            [
              <%= link_to 'Services', team_server_services_path(team,server) %>
            ]
            </li>
          <% elsif team && team.id %>
            <li>
            [
              <%= link_to 'Servers', team_servers_path(team) %>
            ]
            </li>
          <% else %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </ul>
<% end %>

